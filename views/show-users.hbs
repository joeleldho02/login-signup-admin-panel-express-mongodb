{{!-- <body onload="displayAlert()"> --}}
<section>
  {{!-- <div class="container px-5 m-auto">
    <div id="alertMsgBox" class="alert alert-success m-2 bg-success p-1 text-center" style="display: none;" role="alert">
      <p id="alertMsg" class="text-white">{{alertMsg}}</p>
    </div>
  </div> --}}
  <div class="container m-5 p-5 m-auto">    
    <button class="btn btn-success mb-2"><a href="/admin/add-user"><i class="fa fa-user-plus"></i> Add User</a></button>
    <button class="btn btn-success mb-2"><a href="/admin/users"><i class="fa fa-users"></i> Show All Users</a></button>
    <div class="input-group mb-3 ms-3 w-25 float-end">
      <form id="search-hidden-form" action="/admin/users/" method="GET" class="p-0">
        <input type="text" name="searchuser" id="searchuser" class="form-control" placeholder="User name">
      </form>
      <div class="input-group-append">
        <button class="btn btn-search bg-color rounded-end-2 rounded-start-0 text-white" id="searchBtn"
          onclick="searchPost('search-hidden-form')">Search</button>
      </div>
    </div>
    <table class="table">
      <thead class="table-danger">
        <tr>
          <th scope="col">S.No</th>
          <th scope="col">Name</th>
          <th scope="col">Gender</th>
          <th scope="col">Phone</th>
          <th scope="col">Email</th>
          <th scope="col">Update</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
        <tr>
          <th scope="row">{{inc @index}}</th>
          <td>{{name}}</td>
          <td>{{gender}}</td>
          <td>{{phone}}</td>
          <td>{{email}}</td>
          <td>
            <a href="/admin/edit-user/{{_id}}"><span class="fa fa-pencil mx-2 fa-lg iconbtn"
                title="Edit {{name}}"></span></a>
            <form id="hidden-form-{{@index}}" action="/admin/deleteuser" method="POST" style="display: none;">
              <input type="hidden" name="userID" value="{{_id}}" />
            </form>
            <button class="btn" id="deleteBtn" onclick="confirmDelete('hidden-form-{{@index}}', '{{name}}')"
              style="border: none; box-shadow: none; background: transparent;">
              <span class=" fa fa-trash fa-lg iconbtn" title="Delete {{name}}"></span>
            </button>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
    {{#if showErr}}
      <div class="text-center">
        <h4 class="text-white h4" >No user found!</h4>
      </div>
    {{/if}}
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script>
  function confirmDelete(formID, name) {
    if (confirm(`Are you sure to delete the user ${name}?`)) {
      document.getElementById(formID).submit();
    }
  }
  function searchPost(formID) {
    document.getElementById(formID).submit();
  }
  //function displayAlert() {
  //  if(document.getElementById('alertMsg').textContent.length !== 0){
  //    showAlert();
  //    setTimeout("hideAlert()", 2000);
  //  }
  //}
  //function hideAlert() {
  //  document.getElementById('alertMsgBox').style.display = 'none';
  //}
  //function showAlert() {
  //  document.getElementById('alertMsgBox').style.display = 'block';
  //} 

</script>
{{!-- </body> --}}